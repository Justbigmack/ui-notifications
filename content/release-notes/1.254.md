# Build 253

2023-07-25

## Features

### Apdex widget

The **Apdex** widget is now generally available in your custom dashboards.

### Custom events

A system rule is added to Instana to verify the number of entities that run on a host for an event. The rule named **Hosts that have unexpected number of entities running on them** is included in the **System Rule** list in **Settings** > **Events** > **New Event** > **Create a New Event**.

### IBM ACE tracing

The environment variable `REMOVE_MQ_HEADER` is added for IBM ACE tracing. Some message flows verify the message structure to ensure the accuracy of the data. However, a message flow exception might occur if an MQRFH2 header is added to an IBM MQ message when IBM ACE or IBM MQ tracing is enabled. You can use the environment variable `REMOVE_MQ_HEADER=TRUE` to delete the trace context in the MQRFH2 header so that message flows can work as expected.

### IBM DataPower sensor

Instana supports monitoring gateway peering status of DataPower. The table `Gateway Peering Status` is added to the IBM DataPower Domain dashboard in the Instana UI. The built-in event `IBM DataPower Gateway Peering status` is added and is triggered if any configuration doesn't meet the [data-synchronization and failover criteria](https://www.ibm.com/docs/en/datapower-gateway/10.5.0?topic=gateway-peering#gatewaypeering__failover__title__1).

### Infrastructure Resources snapshots API

The new `POST /api/infrastructure-monitoring/snapshots` endpoint can retrieve detail information for multiple snapshots. For more information, see [OpenAPI](https://instana.github.io/openapi/#operation/postSnapshots).

### OS process sensor

The `env_vars_enabled` option is added. You can use this option to enable or disable the collection of environment variables. 


### SLO widget for websites

The **SLO** widget in your custom dashboards now supports website service level objectives.

### WebSphere Application Server sensor

In the Instana UI, You can see metrics that are related to Service Integration Bus (SIB) if you enabled related Performance Monitoring Infrastructure (PMI) counters in the WebSphere administrative console.

## Improvements

### Crio Sensor

The **Memory usage %** metric is available for custom event.

### Logging

The default level of logs for `stdout` streams is not `INFO`, and the default level of logs for `stderr` streams is not `ERROR`. If the system cannot determine the log level based on the content and structure of the log message, the log level is categorized and displayed as `UNKNOWN`.

## Fixes

### Synthetic monitoring

The following Synthetic monitoring fixes are included in this release:

- If you used the `PATCH` API to modify your Synthetic test, the Synthetic server that handled the API would add an incorrect property to the test, and thus the Synthetic test could not be retrieved, updated, or deleted by using either API or the Instana UI. Now the issue is fixed.

- When you switch the method of creating a Synthetic test from using the **Create Synthetic Test** wizard to using the advanced mode, the script content was not carried over into the **Configuration** section of the advanced mode. This issue is fixed.
- When you create an API Script test in the Synthetic monitoring UI, if the script content is pasted into the input box and saved, nothing was displayed in the **Configuration** section. This issue is fixed.
- In the Synthetic monitoring UI, when you edited a Synthetic test that was paused, the test became active when changes were saved. This issue is fixed. The test remains in the paused state when changes are saved.
- When an expectJSON was added to a Synthetic test definition, a JSON snippet couldn't be added. This issue is fixed.

## Features

### Application API changes

The application trace API is changed. The endpoint `GET /api/application-monitoring/analyze/traces/{id}` (see [OpenAPI](https://instana.github.io/openapi/#operation/getTrace)) is marked as deprecated and might be removed in the future.
The replacement for this API is `GET /api/application-monitoring/v2/analyze/traces/{id}` (see [OpenAPI](https://instana.github.io/openapi/#operation/getTraceDownload)). The new API supports pagination and does not provide call data and stacktrace information.

### Instana logs

Instana logs are now generally available. You can perform the following functions with the logs:

* Break down the logs and analyze them through Unbound Analytics by using its application and infrastructure context. For more information, see [Logging](https://www.ibm.com/docs/en/SSE1JP5_current/src/pages/logging/index.html).
* Correlate logs with metrics and traces by using the logs in the context of Kubernetes and containers. For more information, see [Analyze Kubernetes logs](https://www.ibm.com/docs/en/SSE1JP5_current/src/pages/ecosystem/kubernetes/index.html#analyze-kubernetes-logs).
* Enable launch-in-context integrations with third-party log aggregators. For more information, see [Logging integrations](https://www.ibm.com/docs/en/SSE1JP5_current/src/pages/logging/index.html#logging-integrations).

### Native histogram metric support

Native histogram metric support is a technology preview feature that enables the storage and visualization of Prometheus histogram metrics as a native metric type. For more information, see [Native histogram metric support (technology preview)](https://www.ibm.com/docs/en/SSE1JP5_current/src/pages/custom_dashboards/histograms.html).

### Node v20 support for Node.js tracer

Instana now supports Node.js v20.

### PHP 8.2 support for PHP tracer

Instana now supports PHP 8.2.

### Open Beta

#### Action Framework

Action Framework is now available as Open Beta in Instana SaaS environments. By using this feature, you can add automation directly into Instana to diagnose and remediate events. For more information, see [Action Framework (Open Beta)](https://www.ibm.com/docs/en/SSE1JP5_current/src/pages/automation/index.html).

### Synthetic monitoring feature is generally available

The Synthetic monitoring feature is generally available with Instana 253!
The supported features include:

* Create synthetic tests through the Instana UI or API for web applications and websites
* Use credentials in your synthetic tests; credentials are stored securely in Instana
* Deploy Points of Presence (PoP)
* Monitor PoP health by using the PoP sensor

**Note:** Points of Presence (PoP) must be deployed in the customer environment.

For more information on deploying PoP, see [Synthetic Monitoring documentation](https://www.ibm.com/docs/en/SSE1JP5_current/src/pages/synthetic_monitoring/index.html).

## Improvements

### Synthetic Monitoring: Permissions for UI actions

Buttons and icons related to Synthetic Monitoring in Instana UI, which invoke actions such as creating a synthetic test, updating a synthetic test, or deleting a location, are visible only if the user has the appropriate permissions.
For example, if the user does not have the permission **Configure Synthetic tests**, then the **Add a synthetic test** button, the "Edit" action (**pencil icon** on the **Configuration** tab), and the "Delete" action (**trash can icon** on the **Configuration** tab) are hidden.
Similarly, if the user does not have the permission **Configure Synthetic Locations**, the **Action Menu** column on the **Locations** tab is hidden.

### Synthetic Monitoring: Support for additional zip formats

Additional file formats for `.zip` files are supported for creating API scripts for Synthetic monitoring tests through the Instana UI. Zip files with or without subdirectories are supported, including support of "." for the current directory and a single file in a `zip' directory.

### ContainerD entity label

ContainerD labels now display namespace and pod name when these are available.

### Trace detail view

An [orphan call](https://www.ibm.com/docs/en/SSE1JP5_current/src/pages/tracing/analytics.html#orphan-calls) indicator is added to the call tree.

## Fixes

### IBM i sensor

* Fixed the storage usage calculation of Auxiliary Storage Pool (ASP).
* Fixed the issue that all the services of AS400 were not being properly closed when the connection was closing.
* Fixed a issue that retrieval of Solid State Disk (SSD) information based on OS version and Level failed because the `UNIT_NVME` condition was not available.

### Synthetic Monitoring: Scroll through locations in the Create Synthetic Test wizard

Using the Create Synthetic Test wizard in the Instana UI, you can scroll through the complete list of locations.

### Synthetic Monitoring: Shared links include filters

Shared links from the Synthetic Monitoring UI pages include previously set filters, even for Smart Alerts.
